<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Configuración del Portafolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      .transition-all {
        transition: all 0.3s ease;
      }
      .dragging {
        opacity: 0.5;
        transform: rotate(2deg);
      }

      /* Line clamp utility */
      .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      /* Grid optimizado para imágenes */
      .aspect-square {
        aspect-ratio: 1;
      }

      /* Hover effects mejorados */
      .file-item:hover {
        transform: translateY(-1px);
      }

      /* Modal simplificado */
      #mediaViewer,
      .modal {
        backdrop-filter: blur(3px);
        animation: fadeIn 0.2s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      /* Mejoras de selección */
      .selected-album {
        background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
        border-color: #3b82f6;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
      }

      /* Glass morphism effect */
      .glass {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      /* Gradient backgrounds */
      .gradient-blue {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      .gradient-purple {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      }

      .gradient-green {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      }

      /* Custom scrollbar */
      .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
      }

      .custom-scrollbar::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 3px;
      }

      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 3px;
      }

      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: #a1a1a1;
      }
    </style>
  </head>
  <body
    class="bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 text-gray-800 min-h-screen"
  >
    <header class="glass sticky top-0 z-50 border-b border-white/20 shadow-lg">
      <div class="container mx-auto px-6 py-4">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-4">
            <div
              class="w-10 h-10 gradient-blue rounded-xl flex items-center justify-center shadow-lg"
            >
              <i class="fas fa-cog text-white text-lg"></i>
            </div>
            <div>
              <h1
                class="text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent"
              >
                Panel de Administración
              </h1>
              <p class="text-xs text-gray-500">
                Gestión de contenido audiovisual
              </p>
            </div>
            <span
              id="statusBadge"
              class="hidden px-3 py-1 text-xs font-semibold rounded-full"
            >
              Conectado
            </span>
          </div>
          <div class="flex items-center gap-4">
            <div id="userDisplay" class="hidden text-sm font-medium"></div>
            <a
              href="index.html"
              class="text-gray-600 hover:text-blue-600 hover:bg-white/50 px-4 py-2 rounded-lg transition-all flex items-center gap-2 backdrop-blur-sm"
            >
              <i class="fas fa-arrow-left text-sm"></i>
              <span class="hidden sm:inline">Volver al Portafolio</span>
            </a>
          </div>
        </div>
      </div>
    </header>

    <main class="container mx-auto p-6 space-y-8 max-w-7xl">
      <!-- LOGIN -->
      <div
        id="loginSection"
        class="glass p-10 rounded-2xl shadow-xl max-w-md mx-auto mt-20 border border-white/20"
      >
        <div class="text-center mb-8">
          <div
            class="w-20 h-20 gradient-blue rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg"
          >
            <i class="fas fa-lock text-white text-3xl"></i>
          </div>
          <h2 class="text-3xl font-bold text-gray-800 mb-2">
            Acceso Administrativo
          </h2>
          <p class="text-gray-500">Ingresa tus credenciales para continuar</p>
        </div>

        <div class="space-y-6">
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-3"
              >Usuario</label
            >
            <div class="relative">
              <span
                class="absolute inset-y-0 left-0 flex items-center pl-4 text-gray-400"
              >
                <i class="fas fa-user"></i>
              </span>
              <input
                id="usernameInput"
                type="text"
                placeholder="Nombre de usuario"
                class="w-full p-4 pl-12 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white/50 backdrop-blur-sm"
              />
            </div>
          </div>

          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-3"
              >Contraseña</label
            >
            <div class="relative">
              <span
                class="absolute inset-y-0 left-0 flex items-center pl-4 text-gray-400"
              >
                <i class="fas fa-key"></i>
              </span>
              <input
                id="passwordInput"
                type="password"
                placeholder="Contraseña"
                class="w-full p-4 pl-12 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white/50 backdrop-blur-sm"
              />
            </div>
          </div>

          <div
            id="loginError"
            class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm backdrop-blur-sm"
          >
            <i class="fas fa-exclamation-triangle mr-2"></i>
            Usuario o contraseña incorrectos
          </div>

          <button
            id="loginBtn"
            class="w-full gradient-blue text-white p-4 rounded-xl hover:shadow-lg transition-all font-semibold flex items-center justify-center gap-3 shadow-md transform hover:scale-105"
          >
            <i class="fas fa-sign-in-alt"></i>
            Iniciar Sesión
          </button>
        </div>
      </div>

      <!-- SECCIÓN DE CONFIGURACIÓN -->
      <div id="configSection" class="hidden">
        <!-- Menú de navegación mejorado -->
        <nav
          class="glass rounded-2xl mb-8 border border-white/20 shadow-lg overflow-hidden"
        >
          <ul class="flex flex-wrap text-sm font-medium text-center">
            <li class="nav-tab active-tab flex-1" data-target="upload-section">
              <button
                class="inline-block w-full p-6 text-blue-600 border-b-2 border-blue-600 active bg-blue-50/50 hover:bg-blue-100/50 transition-all backdrop-blur-sm"
              >
                <i class="fas fa-upload mr-3 text-lg"></i>
                <div>
                  <div class="font-semibold">Subir Álbum</div>
                  <div class="text-xs opacity-75">Crear nuevo contenido</div>
                </div>
              </button>
            </li>
            <li class="nav-tab flex-1" data-target="albums-section">
              <button
                class="inline-block w-full p-6 text-gray-600 border-b-2 border-transparent hover:border-gray-300 hover:text-gray-800 hover:bg-gray-50/50 transition-all backdrop-blur-sm"
              >
                <i class="fas fa-images mr-3 text-lg"></i>
                <div>
                  <div class="font-semibold">Gestionar Álbumes</div>
                  <div class="text-xs opacity-75">Editar y organizar</div>
                </div>
              </button>
            </li>
            <li class="nav-tab flex-1" data-target="users-section">
              <button
                class="inline-block w-full p-6 text-gray-600 border-b-2 border-transparent hover:border-gray-300 hover:text-gray-800 hover:bg-gray-50/50 transition-all backdrop-blur-sm"
              >
                <i class="fas fa-users-cog mr-3 text-lg"></i>
                <div>
                  <div class="font-semibold">Usuarios</div>
                  <div class="text-xs opacity-75">Administrar accesos</div>
                </div>
              </button>
            </li>
          </ul>
        </nav>

        <!-- Subida de archivos mejorada -->
        <section
          id="upload-section"
          class="config-tab glass p-8 rounded-2xl shadow-lg border border-white/20"
        >
          <div class="flex items-center mb-8">
            <div
              class="w-12 h-12 gradient-green rounded-xl flex items-center justify-center mr-4 shadow-lg"
            >
              <i class="fas fa-plus text-white text-xl"></i>
            </div>
            <div>
              <h2 class="text-2xl font-bold text-gray-800">
                Crear nuevo álbum
              </h2>
              <p class="text-gray-500">
                Sube tus mejores momentos audiovisuales
              </p>
            </div>
          </div>

          <form id="uploadForm" class="space-y-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
              <div class="space-y-6">
                <div>
                  <label class="block text-sm font-semibold text-gray-700 mb-3"
                    >Nombre del álbum *</label
                  >
                  <input
                    type="text"
                    name="sesion"
                    placeholder="Ej: Vacaciones de verano 2025"
                    required
                    class="w-full border border-gray-200 p-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white/50 backdrop-blur-sm"
                  />
                </div>

                <div>
                  <label class="block text-sm font-semibold text-gray-700 mb-3"
                    >Descripción</label
                  >
                  <textarea
                    name="descripcion"
                    placeholder="Describe este álbum y los momentos especiales que contiene..."
                    rows="4"
                    class="w-full border border-gray-200 p-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all resize-none bg-white/50 backdrop-blur-sm"
                  ></textarea>
                </div>
              </div>

              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-3"
                  >Archivos *</label
                >
                <div
                  class="border-2 border-dashed border-gray-300 rounded-2xl p-8 text-center hover:bg-white/30 hover:border-blue-400 transition-all duration-300 min-h-[250px] flex flex-col justify-center backdrop-blur-sm"
                >
                  <input
                    type="file"
                    name="archivo"
                    id="fileInput"
                    multiple
                    accept="image/*,video/*"
                    required
                    class="hidden"
                  />
                  <label
                    for="fileInput"
                    class="cursor-pointer flex flex-col items-center justify-center"
                  >
                    <div
                      class="w-16 h-16 gradient-blue rounded-2xl flex items-center justify-center mb-6 shadow-lg"
                    >
                      <i
                        class="fas fa-cloud-upload-alt text-white text-2xl"
                      ></i>
                    </div>
                    <span class="text-lg font-semibold text-gray-700 mb-2"
                      >Arrastra archivos aquí o haz clic para seleccionar</span
                    >
                    <span class="text-sm text-gray-500"
                      >JPG, PNG, GIF, MP4 - Máximo 50MB por archivo</span
                    >
                  </label>
                  <div
                    id="selectedFiles"
                    class="mt-6 space-y-3 max-h-40 overflow-y-auto custom-scrollbar"
                  ></div>
                </div>
              </div>
            </div>

            <div class="flex justify-end pt-6 border-t border-gray-200">
              <button
                type="submit"
                class="gradient-green text-white px-8 py-4 rounded-xl hover:shadow-lg transition-all flex items-center gap-3 shadow-md font-semibold transform hover:scale-105"
              >
                <i class="fas fa-save text-lg"></i>
                Crear Álbum
              </button>
            </div>
          </form>
        </section>

        <!-- Gestión de álbumes mejorada -->
        <section id="albums-section" class="config-tab hidden">
          <div class="grid grid-cols-1 xl:grid-cols-3 gap-8">
            <!-- Lista de álbumes -->
            <div class="xl:col-span-1">
              <div
                class="glass p-6 rounded-2xl shadow-lg border border-white/20"
              >
                <div class="flex items-center mb-6">
                  <div
                    class="w-10 h-10 gradient-blue rounded-xl flex items-center justify-center mr-3 shadow-lg"
                  >
                    <i class="fas fa-sort text-white"></i>
                  </div>
                  <div>
                    <h2 class="text-xl font-bold text-gray-800">Álbumes</h2>
                    <p class="text-xs text-gray-500">Selecciona para editar</p>
                  </div>
                </div>

                <ul
                  id="sortableAlbums"
                  class="space-y-4 max-h-96 overflow-y-auto custom-scrollbar"
                >
                  <!-- Elementos generados dinámicamente -->
                </ul>
              </div>
            </div>

            <!-- Detalles del álbum -->
            <div class="xl:col-span-2">
              <div
                class="glass p-8 rounded-2xl shadow-lg border border-white/20 min-h-[600px]"
              >
                <div
                  class="text-center p-16 text-gray-500"
                  id="noAlbumSelected"
                >
                  <div
                    class="w-20 h-20 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-6"
                  >
                    <i class="fas fa-images text-3xl text-gray-400"></i>
                  </div>
                  <h3 class="text-xl font-semibold text-gray-700 mb-3">
                    Selecciona un álbum
                  </h3>
                  <p class="text-gray-500">
                    Elige un álbum de la lista para ver y editar sus detalles
                  </p>
                </div>

                <div id="albumContent" class="hidden">
                  <!-- Contenido generado dinámicamente -->
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Gestión de usuarios mejorada -->
        <section id="users-section" class="config-tab hidden">
          <div class="glass p-8 rounded-2xl shadow-lg border border-white/20">
            <div class="flex items-center mb-8">
              <div
                class="w-12 h-12 gradient-purple rounded-xl flex items-center justify-center mr-4 shadow-lg"
              >
                <i class="fas fa-user-shield text-white text-xl"></i>
              </div>
              <div>
                <h2 class="text-2xl font-bold text-gray-800">
                  Administración de usuarios
                </h2>
                <p class="text-gray-500">
                  Gestiona accesos y permisos del sistema
                </p>
              </div>
            </div>

            <!-- Cambio de contraseña personal -->
            <div
              class="mb-10 p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl border border-blue-200"
            >
              <h3
                class="text-lg font-semibold mb-6 text-gray-800 flex items-center"
              >
                <i class="fas fa-key mr-3 text-blue-600"></i>
                Cambiar mi contraseña
              </h3>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                  <label class="block text-sm font-semibold text-gray-700 mb-2"
                    >Contraseña actual</label
                  >
                  <input
                    type="password"
                    id="oldPassword"
                    placeholder="Tu contraseña actual"
                    class="w-full border border-gray-200 p-3 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white/70"
                  />
                </div>
                <div>
                  <label class="block text-sm font-semibold text-gray-700 mb-2"
                    >Nueva contraseña</label
                  >
                  <input
                    type="password"
                    id="newPassword"
                    placeholder="Nueva contraseña"
                    class="w-full border border-gray-200 p-3 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white/70"
                  />
                </div>
                <div>
                  <label class="block text-sm font-semibold text-gray-700 mb-2"
                    >Confirmar nueva</label
                  >
                  <input
                    type="password"
                    id="confirmPassword"
                    placeholder="Repetir nueva contraseña"
                    class="w-full border border-gray-200 p-3 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white/70"
                  />
                </div>
              </div>
              <button
                id="changePasswordBtn"
                class="mt-6 gradient-purple text-white px-6 py-3 rounded-xl hover:shadow-lg transition-all flex items-center gap-3 shadow-md font-semibold transform hover:scale-105"
              >
                <i class="fas fa-key"></i>
                Cambiar mi contraseña
              </button>
            </div>

            <!-- Lista de usuarios -->
            <div class="border-t border-gray-200 pt-8">
              <h3
                class="text-lg font-semibold mb-6 text-gray-800 flex items-center"
              >
                <i class="fas fa-users mr-3 text-purple-600"></i>
                Lista de usuarios
              </h3>
              <div
                class="overflow-x-auto bg-white/50 rounded-2xl backdrop-blur-sm border border-white/20"
              >
                <table class="min-w-full">
                  <thead class="bg-gradient-to-r from-gray-50 to-gray-100">
                    <tr>
                      <th
                        class="py-4 px-6 text-left text-xs font-bold text-gray-600 uppercase tracking-wider"
                      >
                        Usuario
                      </th>
                      <th
                        class="py-4 px-6 text-left text-xs font-bold text-gray-600 uppercase tracking-wider"
                      >
                        Rol
                      </th>
                      <th
                        class="py-4 px-6 text-left text-xs font-bold text-gray-600 uppercase tracking-wider"
                      >
                        Acciones
                      </th>
                    </tr>
                  </thead>
                  <tbody
                    class="divide-y divide-gray-200 bg-white/30"
                    id="usersList"
                  >
                    <!-- Los usuarios se cargan dinámicamente -->
                  </tbody>
                </table>
              </div>

              <!-- Añadir usuario -->
              <div
                class="mt-8 p-6 bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl border border-green-200"
              >
                <h4
                  class="text-lg font-semibold mb-6 text-gray-800 flex items-center"
                >
                  <i class="fas fa-user-plus mr-3 text-green-600"></i>
                  Añadir nuevo usuario
                </h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                  <div>
                    <label
                      class="block text-sm font-semibold text-gray-700 mb-2"
                      >Nombre de usuario</label
                    >
                    <input
                      type="text"
                      id="newUsername"
                      placeholder="Nuevo usuario"
                      class="w-full border border-gray-200 p-3 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none transition-all bg-white/70"
                    />
                  </div>
                  <div>
                    <label
                      class="block text-sm font-semibold text-gray-700 mb-2"
                      >Contraseña</label
                    >
                    <input
                      type="password"
                      id="userPassword"
                      placeholder="Contraseña"
                      class="w-full border border-gray-200 p-3 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none transition-all bg-white/70"
                    />
                  </div>
                  <div>
                    <label
                      class="block text-sm font-semibold text-gray-700 mb-2"
                      >Rol</label
                    >
                    <select
                      id="userRole"
                      class="w-full border border-gray-200 p-3 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none transition-all bg-white/70"
                    >
                      <option value="editor">Editor</option>
                      <option value="admin">Administrador</option>
                    </select>
                  </div>
                </div>
                <button
                  id="addUserBtn"
                  class="mt-6 gradient-green text-white px-6 py-3 rounded-xl hover:shadow-lg transition-all flex items-center gap-3 shadow-md font-semibold transform hover:scale-105"
                >
                  <i class="fas fa-user-plus"></i>
                  Añadir usuario
                </button>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Modal de confirmación mejorado -->
    <div
      id="confirmModal"
      class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 hidden"
    >
      <div
        class="glass rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all"
      >
        <div class="flex items-center mb-6">
          <div
            class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center mr-4"
          >
            <i class="fas fa-exclamation-triangle text-red-600 text-xl"></i>
          </div>
          <h3 class="text-xl font-bold text-gray-800" id="modalTitle">
            Confirmar acción
          </h3>
        </div>
        <p id="modalMessage" class="mb-8 text-gray-600 leading-relaxed">
          ¿Estás seguro de que deseas realizar esta acción?
        </p>
        <div class="flex justify-end gap-4">
          <button
            id="cancelAction"
            class="px-6 py-3 border border-gray-300 rounded-xl hover:bg-gray-50 transition-all font-medium"
          >
            Cancelar
          </button>
          <button
            id="confirmAction"
            class="px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:shadow-lg transition-all font-semibold"
          >
            Confirmar
          </button>
        </div>
      </div>
    </div>

    <!-- Modal para cambiar contraseña de usuario -->
    <div
      id="changeUserPasswordModal"
      class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 hidden modal"
    >
      <div
        class="glass rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all"
      >
        <div class="flex items-center mb-6">
          <div
            class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mr-4"
          >
            <i class="fas fa-key text-blue-600 text-xl"></i>
          </div>
          <h3 class="text-xl font-bold text-gray-800">
            Cambiar contraseña de usuario
          </h3>
        </div>

        <div class="mb-6">
          <p class="text-gray-600 mb-4">
            Cambiando contraseña para:
            <span
              id="targetUserName"
              class="font-semibold text-gray-800"
            ></span>
          </p>

          <div class="space-y-4">
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2">
                Nueva contraseña
              </label>
              <input
                type="password"
                id="adminNewPassword"
                placeholder="Nueva contraseña para el usuario"
                class="w-full border border-gray-200 p-3 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white/70"
              />
            </div>

            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2">
                Confirmar nueva contraseña
              </label>
              <input
                type="password"
                id="adminConfirmPassword"
                placeholder="Confirmar nueva contraseña"
                class="w-full border border-gray-200 p-3 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white/70"
              />
            </div>
          </div>
        </div>

        <div class="flex justify-end gap-4">
          <button
            id="cancelChangePassword"
            class="px-6 py-3 border border-gray-300 rounded-xl hover:bg-gray-50 transition-all font-medium"
          >
            Cancelar
          </button>
          <button
            id="confirmChangePassword"
            class="px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:shadow-lg transition-all font-semibold"
          >
            Cambiar contraseña
          </button>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <script src="config.js"></script>
  </body>
</html>
